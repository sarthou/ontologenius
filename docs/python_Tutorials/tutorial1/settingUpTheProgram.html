<html lang="en_US">

<head>
  <title>Use inheritance for my first program (python) : Setting up the program </title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <link href="../../style/ontologenius_api.css" rel="stylesheet" type="text/css">
  <link href="../../style/ontologenius_tabs.css" rel="stylesheet" type="text/css">
  <link href="../../images/favicon.ico" rel="shortcut icon">
  <link href="../../images/favicon-32x32.png" rel="icon" type="image/png">
  <link href="../../images/favicon-16x16.png" rel="icon" type="image/png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <script src="../../scripts/tabs.js" type="text/javascript"></script>
</head>

<body>
  <div class="header" id="header">
    <header class="fixed" id="navbar">
      <div class="container">
          <div class="navbar-header">
            <div id="header-buttons">
                <ul id="header-ul" data-event="hover_intent" data-effect="fade" data-effect-speed="500">
                    <li class="header-item"><a class="header-link" href="https://github.com/sarthou/ontologenius" tabindex="0"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/1200px-Octicons-mark-github.svg.png" alt="github" width="40px" height="40px"/></a></li>
                </ul>
            </div>
            <a class="navbar-icon" href="../../index.html">
              <img src="../../images/ontologenius.png " alt="ontologenius" width="65px" height="65px"/>
            </a>
        </div>
      </div>
    </header>
  </div>

  <div class="main">

    <div class="navigationbar">
      <ul class="sub-navigation">
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/src/API/ontologenius">C++ API sources</a></li>
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/include/ontologenius/API/ontologenius">C++ API headers</a></li>
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/ontopy/ontologenius">Pyhton API sources</a></li>
        <li><a href="https://gitlab.com/sarthou/ontologenius/pipelines">Pipelines</a></li>
      </ul>
      <h1>Ontologenius Python Documentation</h1>
    </div>

    <div class="content">
      <div class="sidebar" style="transition: all 0.2s ease-out 0s; top: -270px;">
        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Contents</h3>
          <ul style="display: block;">
            <li class="level1"><a href="settingUpTheProgram.html"><b>1. Setting up the program</b></a></li>
            <li class="level1"><a href="LaunchTheProgram.html">2. Launch the program</a></li>
            <li class="level1"><a href="FindTheIntruder.html">3. Find the intruder</a></li>
            <li class="level1"><a href="MostRelevantIntruder.html">4. Find the most relevant intruder</a></li>
            <li class="level1"><a href="ManageTheMultilingual.html">5. Manage the multilingual</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Getting Start</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../Download.html">Download</a></li>
            <li class="level1">Install Ontologenius</li>
            <li class="level2"><a href="../../InstallOntologeniusROS1.html">- Install with ROS1</a></li>
            <li class="level2"><a href="../../InstallOntologeniusROS2.html">- Install with ROS2</a></li>
            <li class="level1"><a href="../../SetUp.html">Set Up Your Environnement</a></li>
            <li class="level1"><a href="../../cpp_Tutorials/Tutorials.html">Cpp Tutorials</a></li>
            <li class="level1"><a href="../Tutorials.html">Python Tutorials</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Overview</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../overview/launchers.html">Launchers</a></li>
            <li class="level1"><a href="../../overview/ontoloGUI.html">OntoloGUI</a></li>
            <li class="level1"><a href="../../overview/reasonersConfiguration.html">Reasoners configuration</a></li>
            <!--li class="level1"><a href="plugins.html">Plugins</a></li-->
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>
            <i class="fas fa-angle-right"></i>
            <a href="../../cpp_API/CppAPI.html">
              All C++ Classes
            </a>
          </h3>
          <h3>
            <i class="fas fa-angle-down"></i>
            <a href="../../python_API/PythonAPI.html">
              All Python Classes
            </a>
          </h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../python_API/ActionClient.html">ActionClient</a></li>
            <li class="level1"><a href="../../python_API/ClassClient.html">ClassClient</a></li>
            <li class="level1"><a href="../../python_API/ClientBase.html">ClientBase</a></li>
            <li class="level1"><a href="../../python_API/DataPropertyClient.html">DataPropertyClient</a></li>
            <li class="level1"><a href="../../python_API/FeederPublisher.html">FeederPublisher</a></li>
            <li class="level1"><a href="../../python_API/IndividualClient.html">IndividualClient</a></li>
            <li class="level1"><a href="../../python_API/ManagerClient.html">ManagerClient</a></li>
            <li class="level1"><a href="../../python_API/ObjectPropertyClient.html">ObjectPropertyClient</a></li>
            <li class="level1"><a href="../../python_API/OntologiesManipulator.html">OntologiesManipulator</a></li>
            <li class="level1"><a href="../../python_API/OntologyClient.html">OntologyClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyManipulator.html">OntologyManipulator</a></li>
            <li class="level1"><a href="../../python_API/ReasonerClient.html">ReasonerClient</a></li>
            <li class="level1"><a href="../../python_API/SparqlClient.html">SparqlClient</a></li>
            <li class="level2"><b>Index based classes</b></li>
            <li class="level1"><a href="../../python_API/ClassIndexClient.html">ClassIndexClient</a></li>
            <li class="level1"><a href="../../python_API/ClientBaseIndex.html">ClientBaseIndex</a></li>
            <li class="level1"><a href="../../python_API/ConversionClient.html">ConversionClient</a></li>
            <li class="level1"><a href="../../python_API/DataPropertyIndexClient.html">DataPropertyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/IndividualIndexClient.html">IndividualIndexClient</a></li>
            <li class="level1"><a href="../../python_API/ObjectPropertyIndexClient.html">ObjectPropertyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyIndexClient.html">OntologyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyManipulatorIndex.html">OntologyManipulatorIndex</a></li>
            <li class="level1"><a href="../../python_API/SparqlIndexClient.html">SparqlIndexClient</a></li>
          </ul>
        </div>
      </div>

      <div class="context">
        <div class="toturial-header">
          <h1 class="title">Use inheritance for my first program (python)</h1>
          <a class="toturial-subheader">
            <div class="tutorial-subheader__main-icon">
              <i class="fas fa-brain"></i>
            </div>
            <div class="toturial-subheader__title">
              <h2 class="title">Who is the intruder ?</h2>
            </div>
          </a>
        </div>

        <h1 class="title">Setting up the program </h1>

        <p>Welcome to this first Ontologenius tutorial. In this tutorial, we will take over the Ontologenius
          API using an OntologyManipulator. This is the most important thing you need to know to use
          Ontologenius in a simple way. We will also see how to launch Ontologenius by configuring it according
          to our needs.</p>

        <p>To illustrate the different objectives of this tutorial, we will develop a mini-game that will
          consist of finding the intruder among a list of words. However, finding only the intruder is a
          much too simple problem. That's why we will also try to find the reason why one word is the intruder
          among the others.</p>

        <p>In this part, we will code the bases of our program from which we will be able to write the more
          algorithmic part. Before that, I invite you to create a new package that we will call &quot;ontologenius_tutorial&quot;
          and which will contain only one source file that we will name &quot;intruder.py&quot; in the scripts folder. To be sure that your
          new package will be well configured to use Ontologenius, we advise you to follow this <a target="_blank" rel="noopener noreferrer" href="../../SetUp.html"><b>guide</b></a>.
          Do not forget to make it executable with:</p>

        <div class="code_block">
            <div class="terminal_line">chmod +x intruder.py</div>
        </div>

        <p>Now we are ready! Let's open our file and start coding:</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-0-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-0-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-0-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-0-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-0-Ros1" class="lang-tabs-panel group-tab" id="panel-0-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 0;">
                <div class="code_line"><span class="py_comment">#!/usr/bin/env python</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">import</span> <span class="py_imported">rospy</span></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">std_msgs.msg</span> <span class="py_import">import</span> <span class="py_imported">String</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">ontologenius</span> <span class="py_import">import</span> <span class="py_imported">OntologyManipulator</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_var">_onto</span> = <span class="py_key">None</span></div>
                <div class="code_line"><span class="py_var">_names</span> = []</div>
                <div class="code_line"><span class="py_var">_start</span> = <span class="py_key">False</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">say</span>(<span class="py_var">text</span>):</div>
                <div class="code_line">    <span class="py_function">print</span>(<span class="py_string">'[SAY]'</span>  + <span class="py_var">text</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">summarize</span>(<span class="py_var">words</span>):</div>
                <div class="code_line">    <span class="py_var">to_say</span> = <span class="py_string">'on '</span> </div>
                <div class="code_line">    <span class="py_op">for</span> <span class="py_var">word</span> <span class="py_op">in</span> <span class="py_var">words</span>:</div>
                <div class="code_line">        <span class="py_var">to_say</span> = <span class="py_var">to_say</span> + <span class="py_var">word</span> + <span class="py_string">' '</span> </div>
                <div class="code_line">    <span class="py_op">return</span> <span class="py_var">to_say</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">wordCallback</span>(<span class="py_var">msg</span>):</div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_start</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_names</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_op">if</span> <span class="py_var">msg</span>.data == <span class="py_string">'start'</span> :</div>
                <div class="code_line">        <span class="py_var">_start</span> = <span class="py_key">True</span></div>
                <div class="code_line">    <span class="py_op">elif</span> <span class="py_key">not</span> <span class="py_var">msg</span>.data <span class="py_key">in</span> <span class="py_var">_names</span>:</div>
                <div class="code_line">        <span class="py_var">_names</span>.<span class="py_function">insert</span>(<span class="py_value">1</span>, <span class="py_var">msg</span>.data)</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-0-Ros2" class="lang-tabs-panel group-tab" id="panel-0-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 0;">
                <div class="code_line"><span class="py_comment">#!/usr/bin/env python</span></div>
                <div class="code_line"><span class="py_import">import</span> <span class="py_imported">rclpy</span></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">rclpy.node</span> <span class="py_import">import</span> <span class="py_imported">Node</span></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">std_msgs.msg</span> <span class="py_import">import</span> <span class="py_imported">String</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">ontopy</span> <span class="py_import">import</span> <span class="py_imported">OntologyManipulator</span>, <span class="py_imported">Ontoros</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_var">_onto</span> = <span class="py_key">None</span></div>
                <div class="code_line"><span class="py_var">_names</span> = []</div>
                <div class="code_line"><span class="py_var">_start</span> = <span class="py_key">False</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">say</span>(<span class="py_var">text</span>):</div>
                <div class="code_line">    <span class="py_imported">Ontoros</span>().<span class="py_function">get_logger</span>().<span class="py_function">info</span>(<span class="py_string">'[SAY] %s'</span> % <span class="py_var">text</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">summarize</span>(<span class="py_var">words</span>):</div>
                <div class="code_line">    <span class="py_var">to_say</span> = <span class="py_string">'on '</span> </div>
                <div class="code_line">    <span class="py_op">for</span> <span class="py_var">word</span> <span class="py_op">in</span> <span class="py_var">words</span>:</div>
                <div class="code_line">        <span class="py_var">to_say</span> = <span class="py_var">to_say</span> + <span class="py_var">word</span> + <span class="py_string">' '</span> </div>
                <div class="code_line">    <span class="py_op">return</span> <span class="py_var">to_say</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">wordCallback</span>(<span class="py_var">msg</span>):</div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_start</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_names</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_op">if</span> <span class="py_var">msg</span>.data == <span class="py_string">'start'</span> :</div>
                <div class="code_line">        <span class="py_var">_start</span> = <span class="py_key">True</span></div>
                <div class="code_line">    <span class="py_op">elif</span> <span class="py_key">not</span> <span class="py_var">msg</span>.data <span class="py_key">in</span> <span class="py_var">_names</span>:</div>
                <div class="code_line">        <span class="py_var">_names</span>.<span class="py_function">insert</span>(<span class="py_value">1</span>, <span class="py_var">msg</span>.data)</div>
              </div>
            </div>
          </div>

        </div>

        <p>Take a break here, we have already written a lot. We will go over all this in detail to better
           understand what we have done.</p>

      <div class="lang-tabs container">
        <div aria-label="Tabbed content" class="closeable" role="tablist">
          <button aria-controls="panel-1-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-1-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
          <button aria-controls="panel-1-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-1-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
        </div>
        
        <div aria-labelledby="tab-1-Ros1" class="lang-tabs-panel group-tab" id="panel-1-Ros1" name="Ros1" role="tabpanel" tabindex="0">
          <div class="highlight-python">
            <div class="code_block cpp_code" style="counter-reset:code_line 2;">
              <div class="code_line"><span class="py_op">import</span> <span class="py_imported">rospy</span></div>
            </div>
            <p>rospy is a convenience package that imports the most common public pieces of the ROS system.</p>
          </div>
        </div>
        
        <div aria-labelledby="tab-1-Ros2" class="lang-tabs-panel group-tab" id="panel-1-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
          <div class="highlight-xml">
            <div class="code_block cpp_code" style="counter-reset:code_line 1;">
              <div class="code_line"><span class="py_op">import</span> <span class="py_imported">rclpy</span></div>
              <div class="code_line"><span class="py_op">from</span> <span class="py_imported">rclpy.node</span> <span class="py_op">import</span> <span class="py_imported">Node</span></div>
            </div>
            <p>rclpy is a convenience package that imports the most common public pieces of the ROS system.</p>
          </div>
        </div>

      </div>

      <div class="code_block cpp_code" style="counter-reset:code_line 3;">
        <div class="code_line"><span class="py_op">from</span> <span class="py_imported">std_msgs.msg</span> <span class="py_op">import</span> <span class="py_imported">String</span></div>
      </div>
      <p>This imports the ROS String message, which resides in the std_msgs ROS package. We use
        it to create a topic on which we will send the words from which our program will have to find the
        intruder. </p>

      <div class="lang-tabs container">
        <div aria-label="Tabbed content" class="closeable" role="tablist">
          <button aria-controls="panel-2-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-2-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
          <button aria-controls="panel-2-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-2-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
        </div>
        
        <div aria-labelledby="tab-2-Ros1" class="lang-tabs-panel group-tab" id="panel-2-Ros1" name="Ros1" role="tabpanel" tabindex="0">
          <div class="highlight-python">
            <div class="code_block cpp_code" style="counter-reset:code_line 5;">
              <div class="code_line"><span class="py_op">from</span> <span class="py_imported">ontologenius</span> <span class="py_op">import</span> <span class="py_imported">OntologyManipulator</span></div>
            </div>
          </div>
        </div>
        
        <div aria-labelledby="tab-2-Ros2" class="lang-tabs-panel group-tab" id="panel-2-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
          <div class="highlight-xml">
            <div class="code_block cpp_code" style="counter-reset:code_line 5;">
              <div class="code_line"><span class="py_op">from</span> <span class="py_imported">ontopy</span> <span class="py_op">import</span> <span class="py_imported">OntologyManipulator</span>, <span class="py_imported">Ontoros</span></div>
            </div>
          </div>
        </div>

      </div>

      <p>This imports what we call an ontology manipulator. This class is just an object to access
        all API ROS abstraction classes so that you can query and manage Ontologenius. You can find the
        documentation for this object on the left panel.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 7;">
          <div class="code_line"><span class="py_var">_onto</span> = <span class="py_key">None</span></div>
        </div>
        <p>As explained above, the ontology manipulator contains several objects to abstract ROS services.
          The set of services work in a connected mode which allows to greatly save in execution time but
          which makes the program less robust. For the lack of robustness, each Ontologenius client takes care
          of everything for you by implementing recovery mechanisms. As for the connected mode, this means
          that the connection is established at the creation of the object and is broken only at its destruction.
          So we understand that it is better to avoid creating several ontology manipulators but it is better to
          create a single instance for our entire program. For convenience, we create here a global variable which
          will be our ontologyManipulator but in more common use we suggest you define it in a class.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 8;">
          <div class="code_line"><span class="py_var">_names</span> = []</div>
        </div>
        <p>This list will allow us to store the different words on which we will perform our search for the intruder.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 9;">
          <div class="code_line"><span class="py_var">_start</span> = <span class="py_key">False</span></div>
        </div>
        <p>This is our synchronization variable. This variable will be False as long as we continue to collect
          words and we will put it in the True state as long as we wish to start the search for the intruder.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 11;">
          <div class="code_line"><span class="py_key">def</span> <span class="py_function">say</span>(<span class="py_var">text</span>):</div>
        </div>
        <p>Here, the say function is just an on-screen display, but you can customize it to use a TTS
           for example.</p>

         <div class="code_block cpp_code" style="counter-reset:code_line 14;">
          <div class="code_line"><span class="py_key">def</span> <span class="py_function">summarize</span>(<span class="py_var">words</span>):</div>
         </div>
         <p>Here, the summarize function concatenates several words in a single string. We created this function
           just to make our main function more readable.</p>

         <div class="code_block cpp_code" style="counter-reset:code_line 20;">
          <div class="code_line"><span class="py_key">def</span> <span class="py_function">wordCallback</span>(<span class="py_var">msg</span>):</div>
         </div>
         <p>Here we have the callback function of our input topic. This topic thus receives strings which
           will be the words from which our program will have to find the intruder. Inside the function,
           we can see that we use the word &quot;start&quot; as a synchronization word that will launch our reasoning.
           The different words of &quot;start&quot; are then stored in the list _names pending processing.
           To add security, line 27 verifies that the word is not already present in the _names list to
           avoid duplicates.</p>

        <p><br><br>We have everything we need to start writing the main function to retrieve the list of words
          to work on and start the reasoning although we do not have it yet.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-3-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-3-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-3-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-3-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-3-Ros1" class="lang-tabs-panel group-tab" id="panel-3-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 34;">
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">main</span>():</div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_names</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_start</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_onto</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_imported">rospy</span>.<span class="py_function">init_node</span>(<span class="py_string">'intruder'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">_onto</span> = <span class="py_imported">OntologyManipulator</span>()</div>
                <div class="code_line">    <span class="py_var">_onto</span>.<span class="py_function">close</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_imported">rospy</span>.<span class="py_imported">Subscriber</span>(<span class="py_string">"intruder/input"</span>, <span class="py_imported">String</span>, <span class="py_function">wordCallback</span>)</div>
                <div class="code_line">    <span class="py_var">rate</span> = <span class="py_imported">rospy</span>.<span class="py_imported">Rate</span>(<span class="py_value">100</span>)</div>
                <div class="code_line">    <span class="py_op">while</span> <span class="py_op">not</span> <span class="py_imported">rospy</span>.<span class="py_function">is_shutdown</span>():</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_var">_start</span> = <span class="py_key">False</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_function">say</span>(<span class="py_string">'Let\'s play!'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_op">while</span> (<span class="py_key">not</span> <span class="py_imported">rospy</span>.<span class="py_function">is_shutdown</span>()) <span class="py_key">and</span> (<span class="py_var">_start</span> == <span class="py_key">False</span>):</div>
                <div class="code_line">            <span class="py_var">rate</span>.<span class="py_function">sleep</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_function">say</span>(<span class="py_function">summarize</span>(<span class="py_var">_names</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_comment">#</span></div>
                <div class="code_line">        <span class="py_comment"># We will find the intruder here</span></div>
                <div class="code_line">        <span class="py_comment">#</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_var">_names</span> = []</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_op">if</span> <span class="py_var">__name__</span> == <span class="py_string">"__main__"</span>:</div>
                <div class="code_line">    <span class="py_function">main</span>()</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-3-Ros2" class="lang-tabs-panel group-tab" id="panel-3-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 29;">
                <div class="code_line"><span class="py_key">class</span> <span class="py_imported">IntruderNode</span>(<span class="py_imported">Node</span>):</div>
                <div class="code_line">    <span class="py_key">def</span> <span class="py_function">__init__</span>(<span class="py_var">self</span>):</div>
                <div class="code_line">        <span class="py_imported">super</span>().<span class="py_function">__init__</span>(<span class="py_string">'intruder_node'</span>)</div>
                <div class="code_line">        <span class="py_var">self</span>.<span class="py_var">subscription</span> = <span class="py_var">self</span>.<span class="py_function">create_subscription</span>(<span class="py_imported">String</span>, <span class="py_string">&quot;intruder/input&quot;</span>, <span class="py_function">wordCallback</span>, <span class="py_value">10</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">main</span>():</div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_names</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_start</span></div>
                <div class="code_line">    <span class="py_key">global</span> <span class="py_var">_onto</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_imported">rclpy</span>.<span class="py_function">init</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">_onto</span> = <span class="py_imported">OntologyManipulator</span>()</div>
                <div class="code_line">    <span class="py_var">_onto</span>.<span class="py_function">close</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">node</span> = <span class="py_imported">IntruderNode</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_op">while</span> <span class="py_imported">rclpy</span>.<span class="py_function">ok</span>():</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_var">_start</span> = <span class="py_key">False</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_function">say</span>(<span class="py_string">'Let\'s play!'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_op">while</span> <span class="py_imported">rclpy</span>.<span class="py_function">ok</span>() <span class="py_key">and</span> (<span class="py_var">_start</span> == <span class="py_key">False</span>):</div>
                <div class="code_line">            <span class="py_imported">rclpy</span>.<span class="py_function">spin_once</span>(<span class="py_var">node</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_function">say</span>(<span class="py_function">summarize</span>(<span class="py_var">_names</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_comment">#</span></div>
                <div class="code_line">        <span class="py_comment"># We will find the intruder here</span></div>
                <div class="code_line">        <span class="py_comment">#</span></div>
                <div class="code_line"><br></div>
                <div class="code_line">        <span class="py_var">_names</span> = []</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">node</span>.<span class="py_function">destroy_node</span>()</div>
                <div class="code_line">    <span class="py_imported">rclpy</span>.<span class="py_function">shutdown</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_op">if</span> <span class="py_var">__name__</span> == <span class="py_string">"__main__"</span>:</div>
                <div class="code_line">    <span class="py_function">main</span>()</div>
              </div>
            </div>
          </div>
  
        </div>

        <p>Now, let's break the code down.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-4-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-4-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-4-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-4-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-4-Ros1" class="lang-tabs-panel group-tab" id="panel-4-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 39;">
                <div class="code_line">    <span class="py_imported">rospy</span>.<span class="py_function">init_node</span>(<span class="py_string">'intruder'</span>)</div>
              </div>

              <p>Initialize a ROS node. This node is not mandatory to use Ontologenius in python but we need it for the ROS subscriber we create after.</p>
            </div>
          </div>
          
          <div aria-labelledby="tab-4-Ros2" class="lang-tabs-panel group-tab" id="panel-4-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 29;">
                <div class="code_line"><span class="py_key">class</span> <span class="py_imported">IntruderNode</span>(<span class="py_imported">Node</span>):</div>
                <div class="code_line">    <span class="py_key">def</span> <span class="py_function">__init__</span>(<span class="py_var">self</span>):</div>
                <div class="code_line">        <span class="py_imported">super</span>().<span class="py_function">__init__</span>(<span class="py_string">'intruder_node'</span>)</div>
              </div>

              <p>First we create a class which inherits from (or is a subclass of) Node and initialize this later.
                 This node is not mandatory to use Ontologenius in python but we need it for the ROS subscriber we create after.</p>

              <div class="code_block cpp_code" style="counter-reset:code_line 39;">
                <div class="code_line">    <span class="py_imported">rclpy</span>.<span class="py_function">init</span>()</div>
              </div>

              <p>In a separate way, we need to initialize ROS.</p>
            </div>
          </div>
  
        </div>

        <div class="code_block cpp_code" style="counter-reset:code_line 41;">
          <div class="code_line">    <span class="py_var">_onto</span> = <span class="py_imported">OntologyManipulator</span>()</div>
        </div>
        <p>We finally come back to using Ontologenius! We create here our first ontology manipulator,
           what a great day ... This manipulator is unique to fully enjoy the benefits of connected
           services.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 42;">
          <div class="code_line">    <span class="py_var">_onto</span>.<span class="py_function">close</span>()</div>
        </div>
        <p>The close function link all the concepts loaded from files and the Internet.
          Before closing an ontology, exploration requests are not allowed.</p>

        <div class="code_block cpp_code">
          <div class="terminal_line">  <span class="py_var">_onto</span>.actions.<span class="py_function">fadd</span>(<span class="py_string">'path/to/may/file.owl'</span>);</div>
          <div class="terminal_line">  <span class="cpp_comment"># OR</span></div>
          <div class="terminal_line">  <span class="py_var">_onto</span>.actions.<span class="py_function">add</span>(<span class="py_string">'http://path/to/my/file.owl'</span>);</div>
          <div class="terminal_line">  <span class="py_var">_onto</span>.<span class="py_function">close</span>();</div>
        </div>
        <p>For the moment, we are going to consider that the ontological file we are
          going to work on is provided in the Ontologenius launcher. We will configure
          it in the next part of the tutorial. It is also possible to load files directly
          from the program (as above) but in doing so it makes our code less reusable.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-5-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-5-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-5-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-5-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-5-Ros1" class="lang-tabs-panel group-tab" id="panel-5-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 44;">
                <div class="code_line">    <span class="py_imported">rospy</span>.<span class="py_imported">Subscriber</span>(<span class="py_string">"intruder/input"</span>, <span class="py_imported">String</span>, <span class="py_function">wordCallback</span>)</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-5-Ros2" class="lang-tabs-panel group-tab" id="panel-5-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 32;">
                <div class="code_line">        <span class="py_var">self</span>.<span class="py_var">subscription</span> = <span class="py_var">self</span>.<span class="py_function">create_subscription</span>(<span class="py_imported">String</span>, <span class="py_string">&quot;intruder/input&quot;</span>, <span class="py_function">wordCallback</span>, <span class="py_value">10</span>)</div>
              </div>
            </div>
          </div>
  
        </div>

        <p>We initialise our subscriber to the topic 'intruder/input'. We also
          link this topic to our callback function.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-6-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-6-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-6-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-6-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-6-Ros1" class="lang-tabs-panel group-tab" id="panel-6-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 46;">
                <div class="code_line">    <span class="py_op">while</span> <span class="py_op">not</span> <span class="py_imported">rospy</span>.<span class="py_function">is_shutdown</span>():</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-6-Ros2" class="lang-tabs-panel group-tab" id="panel-6-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 46;">
                <div class="code_line">    <span class="py_op">while</span> <span class="py_imported">rclpy</span>.<span class="py_function">ok</span>():</div>
              </div>
            </div>
          </div>
  
        </div>

        <p>Just our almost infinite loop. Escaping with a Ctrl + C.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 39;">
          <div class="code_line">        <span class="py_var">_start</span> = <span class="py_key">False</span></div>
          <div class="code_line"><br></div>
          <div class="code_line">        <span class="py_function">say</span>(<span class="py_string">'Let\'s play!'</span>)</div>
        </div>
        <p>We initialize the synchronization variable and inform the user that the program is ready to
          listen to the words.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-7-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-7-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-7-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-7-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-7-Ros1" class="lang-tabs-panel group-tab" id="panel-7-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block cpp_code" style="counter-reset:code_line 52;">
                <div class="code_line">        <span class="py_op">while</span> (<span class="py_key">not</span> <span class="py_imported">rospy</span>.<span class="py_function">is_shutdown</span>()) <span class="py_key">and</span> (<span class="py_var">_start</span> == <span class="py_key">False</span>):</div>
              </div>
              <p class="tip">rate.sleep() avoids unnecessary use of the processor.</p>
            </div>
          </div>
          
          <div aria-labelledby="tab-7-Ros2" class="lang-tabs-panel group-tab" id="panel-7-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block cpp_code" style="counter-reset:code_line 52;">
                <div class="code_line">        <span class="py_op">while</span> <span class="py_imported">rclpy</span>.<span class="py_function">ok</span>() <span class="py_key">and</span> (<span class="py_var">_start</span> == <span class="py_key">False</span>):</div>
              </div>
            </div>
          </div>
  
        </div>

        <p>We only wait for the synchronisation... </p>

        <div class="code_block cpp_code" style="counter-reset:code_line 46;">
          <div class="code_line">        <span class="py_function">say</span>(<span class="py_function">summarize</span>(<span class="py_var">_names</span>))</div>
        </div>
        <p>We recall the words on which we will make the reasoning. It is just as a result of this that
          we will implement our reasoning.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 52;">
          <div class="code_line">        <span class="py_var">_names</span> = []</div>
        </div>
        <p>Our loop is over, we can erase the words we used and start over!</p>

        <p>Now, you just have to compile that before going on to the following. Even if we are working with python,
          this command must be executed at least once to inform ROS of the presence of the executable.</p>
        
        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-8-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-8-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-8-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-8-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-8-Ros1" class="lang-tabs-panel group-tab" id="panel-8-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block">
                <div class="terminal_line">catkin_make</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-8-Ros2" class="lang-tabs-panel group-tab" id="panel-8-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-xml">
              <div class="code_block">
                <div class="terminal_line">colcon build --symlink-install</div>
              </div>
            </div>
          </div>
  
        </div> 

        <p class="tip">Do not forget that this command must be done in your workspace</p>


        <nav class="course-pagination">
          <a href="../Tutorials.html" class="course-pagination__btn">
            <i class="fas fa-angle-left"></i>
            <span>Tutorials</span>
          </a>
          <span class="course-pagination__separator"></span>
          <a href="LaunchTheProgram.html" class="course-pagination__btn">
            <span>Launch the program</span>
            <i class="fas fa-angle-right"></i>
          </a>
        </nav>

      </div>
    </div>

  </div>
</body>

<footer>
  <div align="center">
    <p>
      Brought to you by:
      <a class="laas_logo" href="https://www.laas.fr/public/">
        <img src="../../images/LogoLAAS-2016_BW.png " alt="LAAS-CNRS" height="60px"/>
      </a>
    </p>
  </div>
</footer>

</html>
