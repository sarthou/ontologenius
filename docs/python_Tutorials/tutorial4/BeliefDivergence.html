<html lang="en_US">

<head>
  <title>Manage multiple ontologies (python) : Detect divergence of belief</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <link href="../../style/ontologenius_api.css" rel="stylesheet" type="text/css">
  <link href="../../style/ontologenius_tabs.css" rel="stylesheet" type="text/css">
  <link href="../../images/favicon.ico" rel="shortcut icon">
  <link href="../../images/favicon-32x32.png" rel="icon" type="image/png">
  <link href="../../images/favicon-16x16.png" rel="icon" type="image/png">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <script src="../../scripts/tabs.js" type="text/javascript"></script>
</head>

<body>
  <div class="header" id="header">
    <header class="fixed" id="navbar">
      <div class="container">
          <div class="navbar-header">
            <div id="header-buttons">
                <ul id="header-ul" data-event="hover_intent" data-effect="fade" data-effect-speed="500">
                    <li class="header-item"><a class="header-link" href="https://github.com/sarthou/ontologenius" tabindex="0"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Octicons-mark-github.svg/1200px-Octicons-mark-github.svg.png" alt="github" width="40px" height="40px"/></a></li>
                </ul>
            </div>
            <a class="navbar-icon" href="../../index.html">
              <img src="../../images/ontologenius.png " alt="ontologenius" width="65px" height="65px"/>
            </a>
        </div>
      </div>
    </header>
  </div>

  <div class="main">

    <div class="navigationbar">
      <ul class="sub-navigation">
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/src/API/ontologenius">C++ API sources</a></li>
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/include/ontologenius/API/ontologenius">C++ API headers</a></li>
        <li><a href="https://github.com/sarthou/ontologenius/tree/master/ontopy/ontologenius">Pyhton API sources</a></li>
        <li><a href="https://gitlab.com/sarthou/ontologenius/pipelines">Pipelines</a></li>
      </ul>
      <h1>Ontologenius Python Documentation</h1>
    </div>

    <div class="content">
      <div class="sidebar" style="transition: all 0.2s ease-out 0s; top: 0px;">
        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Contents</h3>
          <ul style="display: block;">
            <li class="level1"><a href="Presentation.html">1. Presentation of the problem</a></li>
            <li class="level1"><a href="CreateMultipleOntologies.html">2. Create multiple ontologies</a></li>
            <li class="level1"><a href="BeliefDivergence.html"><b>3. Detect divergence of belief</b></a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Getting Start</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../Download.html">Download</a></li>
            <li class="level1">Install Ontologenius</li>
            <li class="level2"><a href="../../InstallOntologeniusROS1.html">- Install with ROS1</a></li>
            <li class="level2"><a href="../../InstallOntologeniusROS2.html">- Install with ROS2</a></li>
            <li class="level1"><a href="../../SetUp.html">Set Up Your Environnement</a></li>
            <li class="level1"><a href="../../cpp_Tutorials/Tutorials.html">Cpp Tutorials</a></li>
            <li class="level1"><a href="../Tutorials.html">Python Tutorials</a></li>
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>Overview</h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../overview/launchers.html">Launchers</a></li>
            <li class="level1"><a href="../../overview/ontoloGUI.html">OntoloGUI</a></li>
            <li class="level1"><a href="../../overview/reasonersConfiguration.html">Reasoners configuration</a></li>
            <!--li class="level1"><a href="plugins.html">Plugins</a></li-->
          </ul>
        </div>

        <div class="contents">
          <div id="contents-toggle" class=""></div>
          <h3>
            <i class="fas fa-angle-right"></i>
            <a href="../../cpp_API/CppAPI.html">
              All C++ Classes
            </a>
          </h3>
          <h3>
            <i class="fas fa-angle-down"></i>
            <a href="../../python_API/PythonAPI.html">
              All Python Classes
            </a>
          </h3>
          <ul style="display: block;">
            <li class="level1"><a href="../../python_API/ActionClient.html">ActionClient</a></li>
            <li class="level1"><a href="../../python_API/ClassClient.html">ClassClient</a></li>
            <li class="level1"><a href="../../python_API/ClientBase.html">ClientBase</a></li>
            <li class="level1"><a href="../../python_API/DataPropertyClient.html">DataPropertyClient</a></li>
            <li class="level1"><a href="../../python_API/FeederPublisher.html">FeederPublisher</a></li>
            <li class="level1"><a href="../../python_API/IndividualClient.html">IndividualClient</a></li>
            <li class="level1"><a href="../../python_API/ManagerClient.html">ManagerClient</a></li>
            <li class="level1"><a href="../../python_API/ObjectPropertyClient.html">ObjectPropertyClient</a></li>
            <li class="level1"><a href="../../python_API/OntologiesManipulator.html">OntologiesManipulator</a></li>
            <li class="level1"><a href="../../python_API/OntologyClient.html">OntologyClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyManipulator.html">OntologyManipulator</a></li>
            <li class="level1"><a href="../../python_API/ReasonerClient.html">ReasonerClient</a></li>
            <li class="level1"><a href="../../python_API/SparqlClient.html">SparqlClient</a></li>
            <li class="level2"><b>Index based classes</b></li>
            <li class="level1"><a href="../../python_API/ClassIndexClient.html">ClassIndexClient</a></li>
            <li class="level1"><a href="../../python_API/ClientBaseIndex.html">ClientBaseIndex</a></li>
            <li class="level1"><a href="../../python_API/ConversionClient.html">ConversionClient</a></li>
            <li class="level1"><a href="../../python_API/DataPropertyIndexClient.html">DataPropertyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/IndividualIndexClient.html">IndividualIndexClient</a></li>
            <li class="level1"><a href="../../python_API/ObjectPropertyIndexClient.html">ObjectPropertyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyIndexClient.html">OntologyIndexClient</a></li>
            <li class="level1"><a href="../../python_API/OntologyManipulatorIndex.html">OntologyManipulatorIndex</a></li>
            <li class="level1"><a href="../../python_API/SparqlIndexClient.html">SparqlIndexClient</a></li>
          </ul>
        </div>
      </div>

      <div class="context">
        <div class="toturial-header">
          <h1 class="title">Manage multiple ontologies (python)</h1>
          <a class="toturial-subheader">
            <div class="tutorial-subheader__main-icon">
              <i class="fas fa-brain"></i>
            </div>
            <div class="toturial-subheader__title">
              <h2 class="title">Sally &amp; Anne test</h2>
            </div>
          </a>
        </div>

        <h1 class="title">Detect divergence of belief</h1>

        <p>We now consider that Sally is absent and Anne moves the ball from Container 1 to Container 2.
          Replace the previous code with this new one.</p>

        <div class="lang-tabs container">
          <div aria-label="Tabbed content" class="closeable" role="tablist">
            <button aria-controls="panel-0-Ros1" aria-selected="true" class="lang-tabs-tab group-tab" id="tab-0-Ros1" name="Ros1" role="tab" tabindex="0">ROS1</button>
            <button aria-controls="panel-0-Ros2" aria-selected="false" class="lang-tabs-tab group-tab" id="tab-0-Ros2" name="Ros2" role="tab" tabindex="-1">ROS2</button>
          </div>
          
          <div aria-labelledby="tab-0-Ros1" class="lang-tabs-panel group-tab" id="panel-0-Ros1" name="Ros1" role="tabpanel" tabindex="0">
            <div class="highlight-python">
              <div class="code_block python_code" style="counter-reset:code_line 0;">
                <div class="code_line"><span class="py_comment">#!/usr/bin/env python</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">import</span> <span class="py_imported">rospy</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">ontologenius</span> <span class="py_import">import</span> <span class="py_imported">OntologiesManipulator</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">main</span>():</div>
                <div class="code_line">    <span class="py_imported">rospy</span>.<span class="py_function">init_node</span>(<span class="py_string">'multiple_ontologies'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span> = <span class="py_imported">OntologiesManipulator</span>()</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">waitInit</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">add</span>(<span class="py_string">'sally'</span>)</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">add</span>(<span class="py_string">'anne'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'sally'</span>).<span class="py_function">close</span>()</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).<span class="py_function">close</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">result</span> = <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'sally'</span>).individuals.<span class="py_function">getOn</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>)</div>
                <div class="code_line">    <span class="py_function">print</span>(<span class="py_string">'for sally, ball_1 is in : '</span> + <span class="py_imported">str</span>(<span class="py_var">result</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">result</span> = <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).individuals.<span class="py_function">getOn</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>)</div>
                <div class="code_line">    <span class="py_function">print</span>(<span class="py_string">'for anne, ball_1 is in : '</span> + <span class="py_imported">str</span>(<span class="py_var">result</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitConnected</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">removeObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_1'</span>)</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">addObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_2'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitUpdate</span>(<span class="py_value">500</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">differences</span> = <span class="py_var">onto</span>.<span class="py_function">getDifference</span>(<span class="py_string">'sally'</span>, <span class="py_string">'anne'</span>, <span class="py_string">'ball_1'</span>)</div>
                <div class="code_line">    <span class="py_function">print</span>(<span class="py_string">'The difference of belief regarding the ball_1 is:'</span>)</div>
                <div class="code_line">    <span class="py_op">for</span> <span class="py_var">diff</span> <span class="py_op">in</span> <span class="py_var">differences</span>:</div>
                <div class="code_line">        <span class="py_function">print</span>(<span class="py_var">diff</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_op">if</span> <span class="py_var">__name__</span> == <span class="py_string">'__main__'</span>:</div>
                <div class="code_line">    <span class="py_function">main</span>()</div>
              </div>
            </div>
          </div>
          
          <div aria-labelledby="tab-0-Ros2" class="lang-tabs-panel group-tab" id="panel-0-Ros2" name="Ros2" role="tabpanel" tabindex="0" hidden="true">
            <div class="highlight-python">
              <div class="code_block python_code" style="counter-reset:code_line 0;">
                <div class="code_line"><span class="py_comment">#!/usr/bin/env python</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">import</span> <span class="py_imported">rclpy</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_import">from</span> <span class="py_imported">ontopy</span> <span class="py_import">import</span> <span class="py_imported">OntologiesManipulator</span>, <span class="py_imported">Ontoros</span></div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_key">def</span> <span class="py_function">main</span>():</div>
                <div class="code_line">    <span class="py_imported">rclpy</span>.<span class="py_function">init</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span> = <span class="py_imported">OntologiesManipulator</span>()</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">waitInit</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">add</span>(<span class="py_string">'sally'</span>)</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">add</span>(<span class="py_string">'anne'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'sally'</span>).<span class="py_function">close</span>()</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).<span class="py_function">close</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">result</span> = <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'sally'</span>).individuals.<span class="py_function">getOn</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>)</div>
                <div class="code_line">    <span class="py_imported">Ontoros</span>.<span class="py_function">get_logger</span>().<span class="py_function">info</span>(<span class="py_string">'for sally, ball_1 is in : '</span> + <span class="py_imported">str</span>(<span class="py_var">result</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">result</span> = <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).individuals.<span class="py_function">getOn</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>)</div>
                <div class="code_line">    <span class="py_imported">Ontoros</span>.<span class="py_function">get_logger</span>().<span class="py_function">info</span>(<span class="py_string">'for anne, ball_1 is in : '</span> + <span class="py_imported">str</span>(<span class="py_var">result</span>))</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitConnected</span>()</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">removeObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_1'</span>)</div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">addObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_2'</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitUpdate</span>(<span class="py_value">500</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line">    <span class="py_var">differences</span> = <span class="py_var">onto</span>.<span class="py_function">getDifference</span>(<span class="py_string">'sally'</span>, <span class="py_string">'anne'</span>, <span class="py_string">'ball_1'</span>)</div>
                <div class="code_line">    <span class="py_imported">Ontoros</span>.<span class="py_function">get_logger</span>().<span class="py_function">info</span>(<span class="py_string">'The difference of belief regarding the ball_1 is:'</span>)</div>
                <div class="code_line">    <span class="py_op">for</span> <span class="py_var">diff</span> <span class="py_op">in</span> <span class="py_var">differences</span>:</div>
                <div class="code_line">        <span class="py_imported">Ontoros</span>.<span class="py_function">get_logger</span>().<span class="py_function">info</span>(<span class="py_var">diff</span>)</div>
                <div class="code_line"><br></div>
                <div class="code_line"><span class="py_op">if</span> <span class="py_var">__name__</span> == <span class="py_string">'__main__'</span>:</div>
                <div class="code_line">    <span class="py_function">main</span>()</div>
              </div>
            </div>
          </div>
        </div>

        <p>First of all a small trick.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 24;">
          <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitConnected</span>()</div>
        </div>

        <p>If you know ROS, you should know that subscribers may take a few moments to connect to listeners. Because, again,
          our program is a bit too fast, this connection may not be effective immediately. To avoid this problem, you can use
          the previous lines to make sure that our feeder is connected to at least one listener.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 26;">
          <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">removeObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_1'</span>)</div>
          <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">addObjectProperty</span>(<span class="py_string">'ball_1'</span>, <span class="py_string">'isIn'</span>, <span class="py_string">'container_2'</span>)</div>
        </div>

        <p>Here are really the two lines that represent the fact that Anne removes the ball from the first container and puts it
          in the second container. You see here that these changes are applied only to Anne.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 29;">
          <div class="code_line">    <span class="py_var">onto</span>.<span class="py_function">get</span>(<span class="py_string">'anne'</span>).feeder.<span class="py_function">waitUpdate</span>(<span class="py_value">500</span>)</div>
        </div>

        <p>With the waitUpdate function, we will wait until the previous changes are applied. For security reasons, we set a timeout of 500 ms.</p>

        <div class="code_block cpp_code" style="counter-reset:code_line 31;">
          <div class="code_line">    <span class="py_var">differences</span> = <span class="py_var">onto</span>.<span class="py_function">getDifference</span>(<span class="py_string">'sally'</span>, <span class="py_string">'anne'</span>, <span class="py_string">'ball_1'</span>)</div>
        </div>

        <p>The OntologiesManipulator object directly provides functionality to get all the belief divergence between two ontologies about a specific concept.</p>

        <p>Run the code with the launcher created previously. You should have this result at the end:</p>

        <div class="code_block">
          <div class="terminal_line">for sally, ball_1 is in : ['container_1']</div>
          <div class="terminal_line">for anne, ball_1 is in : ['container_1']</div>
          <div class="terminal_line">The difference of belief regarding the ball_1 is:</div>
          <div class="terminal_line">[-]ball_1|isIn|container_2</div>
          <div class="terminal_line">[+]ball_1|isIn|container_1</div>
        </div>

        <p>You can see from this display that the result of the getDifference function is really a difference, as in the mathematical
          sense. This can be read as the fact that "ball_1 isIn container_1" is present in Sally's base and not in Anne's and that
          the fact that "ball_1 isIn container_2" is not present in Sally's base then that it is in Anne's.</p>

        <p>Now kill the previous process and restart it. This time, you should have this:</p>
        <div class="code_block">
          <div class="terminal_line">for sally, ball_1 is in : ['container_1']</div>
          <div class="terminal_line">for anne, ball_1 is in : ['container_2']</div>
          <div class="terminal_line">The difference of belief regarding the ball_1 is:</div>
          <div class="terminal_line">[-]ball_1|isIn|container_2</div>
          <div class="terminal_line">[+]ball_1|isIn|container_1</div>
        </div>

        <p>You can see two things here. First, the ball was already in the second container for Anne at first. Secondly,
          even though we added the fact that the ball_1 is in the second container when it was already the case, the fact
          only appears once.</p>

        <p>If you open the ontologenius_tutorial folder, you should have two new files, multi_anne.owl and multi_sally.owl.
          These two files are Ontologenius internal files. Remember that the intern_file argument has been set to
          "multi.owl". In fact, multi can simply be considered a namespace that will be used to create the
          names of internal files.</p>

        <nav class="course-pagination">
          <a href="CreateMultipleOntologies.html" class="course-pagination__btn">
            <i class="fas fa-angle-left"></i>
            <span>Create multiple ontologies</span>
          </a>
          <span class="course-pagination__separator"></span>
          <a href="../tutorial5/Presentation.html" class="course-pagination__btn">
            <span>Next tutorial: Explore possible futures</span>
            <i class="fas fa-angle-right"></i>
          </a>
        </nav>

      </div>
    </div>

  </div>
</body>

<footer>
  <div align="center">
    <p>
      Brought to you by:
      <a class="laas_logo" href="https://www.laas.fr/public/">
        <img src="../../images/LogoLAAS-2016_BW.png " alt="LAAS-CNRS" height="60px"/>
      </a>
    </p>
  </div>
</footer>

</html>
